# 3. STATE

## 3.0 Understanding State

어려운 방법: 항상 render를 잊지말고 해줘야 함

1. 변수를 사용할 때 중괄호({})안에 넣어주면 됨

2. 변화된 부분을 UI에 적용하고 싶다면 render 함수를 다시 호출해야 함

```html
<!DOCTYPE html>
<html>
  <body>
    <div id="root"></div>
  </body>
  <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script type="text/babel">
    const root = document.getElementById('root');
    let counter = 0;
    function countUp() {
      counter = counter + 1;
      render();
    }
    function render() {
      ReactDOM.render(<Container />, root);
    }
    const Container = () => (
      <div>
        <h3>Total clicks: {counter}</h3>
        <button onClick={countUp}>Click me</button>
      </div>
    );
    render();
  </script>
</html>
```

개발자 도구에서 살펴보면 바닐라 JS에서는 버튼을 누를 때마다 body와 span이 업데이트되는 것을 볼 수 있다. 하지만 React JS에서는 버튼을 누를 때마다 h3, button, div들은 업데이트 되지 않고 UI에서 바뀐 부분만 업데이트 해준다.

## 3.1 setState part One

데이터가 바뀔 때마다 render 함수를 호출하는 것은 별로 좋은 방법이 아니다

React.useState()를 통해 컴포넌트에서 바뀌는 값을 관리할 수 있다.

```js
const data = React.useState();
console.log(data);
```

를 하면 콘솔창에 배열([undefined, f])이 뜨는데 data와 data를 바꿀 때 사용하는 함수를 가진 배열이다.

React.useState()에는 인자로 초기값을 가질 수 있다.

아래의 두 코드는 같은 의미이다.

```js
const data = React.useState(0);
```

```js
let counter = 0;
function countUp() {
    // code
}
```

이제 값을 변수에 넣어줄 때는 {data[0]}으로 쓸 수도 있지만 보기 좋지 않다.

이름을 정해주는 방법!?

```js
const food = ["tomato", "potato"]
const [myFavFood, mySecondFavFood] = food
```

myFavFood와 mySecondFavFood 각각에 "tomato"와 "potato"가 할당됨

```js
const [counter, modifier] = React.useState(0);
```

## 3.2 setState part Two

modifier 함수가 counter 값을 수정해주고 페이지를 자동으로 rerender 해준다

```html
<!DOCTYPE html>
<html>
  <body>
    <div id="root"></div>
  </body>
  <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script type="text/babel">
    const root = document.getElementById('root');
    function App() {
      const [counter, setCounter] = React.useState(0);
      const onClick = () => {
        setCounter(counter + 1);
      };
      return (
        <div>
          <h3>Total clicks: {counter}</h3>
          <button onClick={onClick}>Click me</button>
        </div>
      );
    }
    ReactDOM.render(<App />, root);
  </script>
</html>
```

## 3.3 Recap

React.useState()에서 값이 바뀌면 자동으로 랜더링 해준다!!!

## 3.4 State Functions

앱의 state 바꾸는 법

이전의 코드는 다른 곳에서 counter가 update될 수 있기 때문에 좋은 방법이 아님

state를 바꾸는 2가지 방법

1. setCounter를 이용해서 우리가 원하는 값을 넣어주는 것

2. 이전 값을 이용해서 현재 값을 계산해 내는 것

   ```js
   setCounter((current) => current + 1);
   ```

   위에서 사용한 방법보다 더 안전하다